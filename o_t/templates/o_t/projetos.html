{% load i18n outras_tags %}

{% get_current_language as lang %}

{% if form %}
	{% set False as link %}
{% else %}
	{% set True as link %}
{% endif %}

{% espaco %}

<div class="cartaz linha">
	<p class="titulo"><a href="{% url 'galeria' %}">{{ titulo }}</a>{% if not user|grupo:'juri' %} / <a href="{% url 'galeria_dados' %}">dados</a>{% endif %}</p>
</div>


<div class="infinite-container">
	{% for inscricao in pg %}
		<div class="infinite-item">
			{% if forloop.first %}
				{% espaco 60 120 %}
			{% else %}
				{% espaco 80 180 borda='linha linha_' %}
			{% endif %}

			{% include 'o_t/projeto.html' with link=link %}
			
			{% if form %}
				{% include 'o_t/galeria_form.html' %}
			{% endif %}

			{% if forloop.last %}
				{% espaco borda='linha_' %}
			{% endif %}
		</div>
	{% endfor %}
</div>

{% if pg.has_next %}
	<a class="infinite-more-link" href="?page={{ pg.next_page_number }}">{% trans 'ver mais' %}</a>
{% endif %}

<div class="loading" style="display: none;">{% trans 'carregando...' %}</div>

<script>
	var infinite = new Waypoint.Infinite({
	  element: $('.infinite-container')[0],
	  onBeforePageLoad: function () {
	    $('.loading').show();
	  },
	  onAfterPageLoad: function ($items) {
	    $('.loading').hide();
	  }
	});
</script>
